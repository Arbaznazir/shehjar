(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[658],{9738:function(e,t,a){Promise.resolve().then(a.bind(a,9345))},2713:function(){},9397:function(e,t,a){"use strict";a.d(t,{ZR:function(){return o},iE:function(){return l}});var r=a(2265);let n={gstRates:[{value:5,label:"5%"},{value:12,label:"12%"},{value:18,label:"18%"},{value:28,label:"28%"}],defaultGSTRate:5,defaultDiscountType:"none",defaultDiscountValue:0,allowUserPriceControls:!1},l=()=>{let e=localStorage.getItem("appConfig");return e?JSON.parse(e):n},s=e=>{localStorage.setItem("appConfig",JSON.stringify(e))},o=()=>{let[e,t]=(0,r.useState)(n),[a,o]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{t(l()),o(!0)},[]),(0,r.useEffect)(()=>{a&&s(e)},[e,a]),{config:e,updateConfig:(e,a)=>{t(t=>({...t,[e]:a}))},isLoaded:a}}},1218:function(e,t,a){"use strict";a.d(t,{_B:function(){return c},xX:function(){return s},N3:function(){return o},SH:function(){return l},xd:function(){return i}});let r=Object.values(a(9600).KD).flat();var n=a(9397);let l=()=>(0,n.iE)().gstRates,s=()=>[{id:"starters",name:"Starters"},{id:"rockAndRoll",name:"Rock & Roll"},{id:"pizza",name:"Pizza"},{id:"pizzaToppings",name:"Pizza Toppings"},{id:"burgers",name:"Burgers"},{id:"sandwiches",name:"Sandwiches"},{id:"momos",name:"Momos"},{id:"rice",name:"Rice"},{id:"tandoori",name:"Tandoori"},{id:"indian",name:"Indian"},{id:"breads",name:"Breads"},{id:"wazwan",name:"Wazwan"},{id:"continental",name:"Continental"},{id:"pasta",name:"Pasta"},{id:"chineseMeals",name:"Chinese Meals"},{id:"tea",name:"Tea"},{id:"coffee",name:"Coffee"},{id:"beverages",name:"Beverages"},{id:"desserts",name:"Desserts"}],o=e=>r.filter(t=>t.category===e),i=e=>{let t=e.toLowerCase().trim();return r.filter(e=>{let a=e.name.toLowerCase().includes(t),r=!!e.description&&e.description.toLowerCase().includes(t),n=!!e.variants&&e.variants.some(e=>e.size.toLowerCase().includes(t));return a||r||n})},c=e=>"₹".concat(e.toFixed(2))},9345:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var r=a(7437),n=a(2265),l=a(9376);a(7648);let s=()=>{try{let e=localStorage.getItem("restaurantTables");if(!e){let e={mainFloor:[{id:1,name:"Table 1",capacity:4,status:"available",orderId:null,floor:"main"},{id:2,name:"Table 2",capacity:2,status:"available",orderId:null,floor:"main"},{id:3,name:"Table 3",capacity:6,status:"available",orderId:null,floor:"main"},{id:4,name:"Table 4",capacity:4,status:"available",orderId:null,floor:"main"},{id:5,name:"Table 5",capacity:2,status:"available",orderId:null,floor:"main"},{id:6,name:"Table 6",capacity:8,status:"available",orderId:null,floor:"main"},{id:7,name:"Table 7",capacity:4,status:"available",orderId:null,floor:"main"}],topFloor:[{id:8,name:"Table 8",capacity:4,status:"available",orderId:null,floor:"top"},{id:9,name:"Table 9",capacity:2,status:"available",orderId:null,floor:"top"},{id:10,name:"Table 10",capacity:6,status:"available",orderId:null,floor:"top"},{id:11,name:"Table 11",capacity:4,status:"available",orderId:null,floor:"top"},{id:12,name:"Table 12",capacity:2,status:"available",orderId:null,floor:"top"},{id:13,name:"Table 13",capacity:8,status:"available",orderId:null,floor:"top"},{id:14,name:"Table 14",capacity:4,status:"available",orderId:null,floor:"top"},{id:15,name:"Table 15",capacity:10,status:"available",orderId:null,floor:"top"}]};return localStorage.setItem("restaurantTables",JSON.stringify(e)),e}return JSON.parse(e)}catch(e){return console.error("Error initializing tables:",e),null}},o=()=>{try{let e=localStorage.getItem("restaurantTables");if(e)return JSON.parse(e);return s()}catch(e){return console.error("Error getting tables:",e),{mainFloor:[],topFloor:[]}}},i=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;"string"==typeof e&&(e=parseInt(e,10));try{let r=o(),n=null,l=-1;if(l=r.mainFloor.findIndex(t=>t.id===e),-1!==l?n="mainFloor":(l=r.topFloor.findIndex(t=>t.id===e),-1!==l&&(n="topFloor")),!n||-1===l)return!1;return r[n][l]={...r[n][l],status:t,orderId:void 0!==a?a:r[n][l].orderId},"available"===t&&(r[n][l].orderId=null),localStorage.setItem("restaurantTables",JSON.stringify(r)),!0}catch(e){return console.error("Error updating table status:",e),!1}},c=()=>{try{let e=o();return e.mainFloor=e.mainFloor.map(e=>({...e,status:"available",orderId:null})),e.topFloor=e.topFloor.map(e=>({...e,status:"available",orderId:null})),localStorage.setItem("restaurantTables",JSON.stringify(e)),!0}catch(e){return console.error("Error resetting tables:",e),!1}};var d=a(7860);a(1218);var u=a(2713),m=a.n(u);function b(){let[e,t]=(0,n.useState)(!1),[a,s]=(0,n.useState)(!0),[u,b]=(0,n.useState)({mainFloor:[],topFloor:[]}),[g,p]=(0,n.useState)([]),[f,h]=(0,n.useState)(null),[v,x]=(0,n.useState)(null),[y,j]=(0,n.useState)(!1),[N,w]=(0,n.useState)("main"),[O,S]=(0,n.useState)({customerName:"",items:[]}),[I,T]=(0,n.useState)(null),F=(0,l.useRouter)();(0,n.useEffect)(()=>{localStorage.getItem("adminAuth")?(t(!0),b(o()),p((0,d.AU)().filter(e=>"completed"!==e.status&&"cancelled"!==e.status)),C()):F.push("/admin/login"),s(!1)},[F]);let C=()=>{s(!0),b(o()),s(!1)},D=e=>{h(e),x(null),j(!0)},E=e=>{w(e),h(null),j(!1)},P=e=>{switch(e){case"available":return"bg-green-500";case"occupied":return"bg-red-500";case"preparing":return"bg-yellow-500";case"ready":return"bg-blue-500";case"completed":case"reserved":return"bg-purple-500";default:return"bg-gray-300"}},M=e=>{e&&F.push("/admin/orders/".concat(e))},k=(e,t)=>{i(e,t),C(),f&&f.id===e&&h(e=>({...e,status:t}))};return("main"===N?u.mainFloor:u.topFloor,a)?(0,r.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-[rgba(234,219,102,1)]",children:"Loading..."})}):e?(0,r.jsx)(m(),{children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Table Management"}),(0,r.jsxs)("div",{className:"space-x-4",children:[(0,r.jsx)("button",{onClick:()=>{confirm("Are you sure you want to reset all tables to available?")&&(c(),C(),h(null))},className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Reset All Tables"}),(0,r.jsx)("button",{onClick:C,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Refresh"})]})]}),(0,r.jsxs)("div",{className:"flex border-b border-gray-200 mb-6",children:[(0,r.jsx)("button",{className:"px-4 py-2 ".concat("main"===N?"bg-amber-700 text-white":"bg-gray-200 text-gray-700"," rounded-t-lg mr-2"),onClick:()=>E("main"),children:"Main Floor (7 Tables)"}),(0,r.jsx)("button",{className:"px-4 py-2 ".concat("top"===N?"bg-amber-700 text-white":"bg-gray-200 text-gray-700"," rounded-t-lg"),onClick:()=>E("top"),children:"Top Floor (8 Tables)"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"main"===N?"Main Floor Layout":"Top Floor Layout"}),a?(0,r.jsx)("p",{children:"Loading tables..."}):(0,r.jsxs)("div",{className:"relative",children:["main"===N&&(0,r.jsx)("div",{className:"grid grid-cols-3 gap-4 p-4 bg-gray-100 rounded-lg",children:u.mainFloor.map(e=>(0,r.jsxs)("button",{onClick:()=>D(e),className:"\n                          p-4 rounded-lg text-white font-bold\n                          ".concat(P(e.status),"\n                          ").concat((null==f?void 0:f.id)===e.id?"ring-4 ring-amber-400":"","\n                          transition duration-200 transform hover:scale-105\n                        "),children:[(0,r.jsx)("div",{className:"text-xl",children:e.id}),(0,r.jsx)("div",{className:"text-sm capitalize",children:e.status})]},e.id))}),"top"===N&&(0,r.jsx)("div",{className:"grid grid-cols-3 gap-4 p-4 bg-gray-100 rounded-lg",children:u.topFloor.map(e=>(0,r.jsxs)("button",{onClick:()=>D(e),className:"\n                          p-4 rounded-lg text-white font-bold\n                          ".concat(P(e.status),"\n                          ").concat((null==f?void 0:f.id)===e.id?"ring-4 ring-amber-400":"","\n                          transition duration-200 transform hover:scale-105\n                        "),children:[(0,r.jsx)("div",{className:"text-xl",children:e.id}),(0,r.jsx)("div",{className:"text-sm capitalize",children:e.status})]},e.id))})]})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Table Details"}),f?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-bold",children:f.id}),(0,r.jsxs)("p",{className:"capitalize text-sm mb-2",children:["Status:"," ",(0,r.jsx)("span",{className:"font-semibold",children:f.status})]}),(0,r.jsxs)("p",{className:"text-sm mb-4",children:["Floor:"," ",(0,r.jsx)("span",{className:"font-semibold capitalize",children:f.floor})]}),f.orderId?(0,r.jsxs)("p",{className:"text-sm",children:["Associated Order:"," ",(0,r.jsx)("span",{className:"font-semibold",children:f.orderId})]}):(0,r.jsx)("p",{className:"text-sm italic",children:"No active order"})]}),v&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h3",{className:"font-semibold mb-2",children:"Order Information"}),(0,r.jsxs)("div",{className:"bg-gray-100 p-3 rounded-lg",children:[(0,r.jsxs)("p",{className:"text-sm mb-1",children:["Status:"," ",(0,r.jsx)("span",{className:"font-semibold capitalize",children:v.status})]}),(0,r.jsxs)("p",{className:"text-sm mb-1",children:["Items:"," ",(0,r.jsx)("span",{className:"font-semibold",children:v.items.length})]}),(0,r.jsxs)("p",{className:"text-sm mb-3",children:["Total:"," ",(0,r.jsxs)("span",{className:"font-semibold",children:["₹",v.totalAmount.toFixed(2)]})]}),(0,r.jsx)("button",{onClick:()=>M(v.id),className:"w-full bg-blue-500 text-white py-1 px-3 rounded text-sm hover:bg-blue-600 transition",children:"View Full Order"})]})]}),(0,r.jsx)("div",{className:"mt-6 space-y-2",children:(0,r.jsx)("button",{onClick:()=>k(f.id,"available"),className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",disabled:"available"===f.status,children:"Mark as Available"})})]}):(0,r.jsx)("p",{className:"text-gray-500 italic",children:"Select a table to view details"})]})]}),(0,r.jsxs)("div",{className:"mt-6 bg-white p-4 rounded-lg shadow",children:[(0,r.jsx)("h3",{className:"font-semibold mb-2",children:"Table Status Legend"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full bg-green-500 mr-2"}),(0,r.jsx)("span",{className:"text-sm",children:"Available"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full bg-red-500 mr-2"}),(0,r.jsx)("span",{className:"text-sm",children:"Occupied"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full bg-yellow-500 mr-2"}),(0,r.jsx)("span",{className:"text-sm",children:"Preparing"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full bg-blue-500 mr-2"}),(0,r.jsx)("span",{className:"text-sm",children:"Ready"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full bg-purple-500 mr-2"}),(0,r.jsx)("span",{className:"text-sm",children:"Reserved"})]})]})]})]})}):null}a(9089)},7860:function(e,t,a){"use strict";a.d(t,{AU:function(){return l},B4:function(){return s},Xr:function(){return u},lA:function(){return o},oe:function(){return d},v2:function(){return c}});var r=a(9600);let n=()=>{let e=new Date,t=[];for(let a=0;a<60;a++){let n=new Date(e);n.setDate(n.getDate()-a);let l=Math.floor(8*Math.random())+3;for(let e=0;e<l;e++){let a=[],l=Math.floor(4*Math.random())+1,s=0;for(let e=0;e<l;e++){let e=r.KD[Math.floor(Math.random()*r.KD.length)],t=1.18*e.price,n=Math.floor(2*Math.random())+1;a.push({id:e.id,name:e.name,category:e.category,price:t,quantity:n}),s+=t*n}t.push({id:"ORD-".concat(n.getFullYear()).concat((n.getMonth()+1).toString().padStart(2,"0")).concat(n.getDate().toString().padStart(2,"0"),"-").concat(e),date:n.toISOString(),total:s,items:a,status:Math.random()>.1?"completed":"cancelled",paymentMethod:Math.random()>.7?"Cash":"Online"})}}return t},l=()=>{try{let e=localStorage.getItem("restaurantOrders");if(e)return JSON.parse(e);{let e=n();return localStorage.setItem("restaurantOrders",JSON.stringify(e)),e}}catch(e){return console.error("Error getting orders:",e),[]}},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date().getFullYear(),a=l(),r=["january","february","march","april","may","june","july","august","september","october","november","december"].findIndex(t=>t.toLowerCase()===e.toLowerCase());return -1===r?[]:a.filter(e=>{let a=new Date(e.date);return a.getMonth()===r&&a.getFullYear()===t})},o=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date().getFullYear(),r=(e=t?s(t,a):l()).filter(e=>"completed"===e.status),n=r.length,o=r.reduce((e,t)=>e+t.total,0),c=e.length>0?(e.length-r.length)/e.length*100:0,d={};r.forEach(e=>{e.items.forEach(e=>{d[e.id]||(d[e.id]={id:e.id,name:e.name,category:e.category,quantity:0,revenue:0}),d[e.id].quantity+=e.quantity,d[e.id].revenue+=e.price*e.quantity})});let u=Object.values(d).sort((e,t)=>t.revenue-e.revenue);return{totalOrders:n,totalRevenue:o,averageOrderValue:n>0?o/n:0,cancelRate:c,topSellingItems:u.slice(0,10),revenueByCategory:i(u)}},i=e=>{let t={};return e.forEach(e=>{t[e.category]||(t[e.category]=0),t[e.category]+=e.revenue}),Object.entries(t).map(e=>{let[t,a]=e;return{category:t,revenue:a}}).sort((e,t)=>t.revenue-e.revenue)},c=e=>{if(!e||!e.length)return"";let t="Order ID,Date,Total,Items,Status,Payment Method\n";return e.forEach(e=>{let a=new Date(e.date).toLocaleDateString(),r=e.items.map(e=>"".concat(e.quantity,"x ").concat(e.name)).join("; ");t+='"'.concat(e.id,'","').concat(a,'","₹').concat(e.total.toFixed(2),'","').concat(r,'","').concat(e.status,'","').concat(e.paymentMethod,'"\n')}),t},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{return(localStorage.getItem("recentOrders")?JSON.parse(localStorage.getItem("recentOrders")):[]).slice(0,e)}catch(e){return console.error("Error retrieving recent orders:",e),[]}},u=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let e=localStorage.getItem("revenueData")?JSON.parse(localStorage.getItem("revenueData")):{daily:{},monthly:{},items:{}},t=Object.values(e.items).sort((e,t)=>t.totalRevenue-e.totalRevenue).slice(0,10);return{dailyData:e.daily,monthlyData:e.monthly,topItems:t}}catch(e){return console.error("Error retrieving revenue data:",e),{dailyData:{},monthlyData:{},topItems:[]}}}},9376:function(e,t,a){"use strict";var r=a(5475);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},6231:function(e,t,a){"use strict";a.d(t,{w_:function(){return d}});var r=a(2265),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=r.createContext&&r.createContext(n),s=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach(function(t){var r,n;r=t,n=a[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function d(e){return t=>r.createElement(u,o({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,a)=>r.createElement(t.tag,c({key:a},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var a,{attr:n,size:l,title:i}=e,d=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,s),u=l||t.size||"1em";return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),r.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,d,{className:a,style:c(c({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&r.createElement("title",null,i),e.children)};return void 0!==l?r.createElement(l.Consumer,null,e=>t(e)):t(n)}}},function(e){e.O(0,[699,648,600,971,117,744],function(){return e(e.s=9738)}),_N_E=e.O()}]);