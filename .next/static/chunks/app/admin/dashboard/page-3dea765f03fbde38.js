(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[427],{5921:function(e,t,r){Promise.resolve().then(r.bind(r,6861))},6861:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var a=r(7437),s=r(2265),l=r(9376),n=r(8485),o=r(63),d=r(7648),c=r(7860);function i(){let[e,t]=(0,s.useState)(!1),[r,i]=(0,s.useState)(!0),[m,g]=(0,s.useState)(""),[h,x]=(0,s.useState)([]),[u,b]=(0,s.useState)([]),[y,v]=(0,s.useState)([]),[j,p]=(0,s.useState)([]),[f,N]=(0,s.useState)(null),[w,O]=(0,s.useState)({totalOrders:0,totalRevenue:0,averageOrderValue:0,cancelRate:0}),S=(0,l.useRouter)();(0,s.useEffect)(()=>{if(localStorage.getItem("adminAuth")){t(!0);let e=["January","February","March","April","May","June","July","August","September","October","November","December"][new Date().getMonth()];g(e),D(e),p((0,c.oe)(5));let r=(0,c.Xr)();if(N(r),r&&Object.keys(r.monthlyData).length>0){let e=new Date,t="".concat(e.getFullYear(),"-").concat((e.getMonth()+1).toString().padStart(2,"0"));if(r.monthlyData[t]){let e=r.monthlyData[t];O(t=>({...t,totalOrders:e.orderCount||t.totalOrders,totalRevenue:e.totalRevenue||t.totalRevenue,averageOrderValue:e.orderCount>0?e.totalRevenue/e.orderCount:t.averageOrderValue})),r.topItems&&r.topItems.length>0&&b(r.topItems.map(e=>({id:e.id,name:e.name,category:e.category,quantity:e.totalQuantity,revenue:e.totalRevenue})))}}}else S.push("/admin/login");i(!1)},[S]);let D=e=>{x((0,c.B4)(e));let t=(0,c.lA)(e);O({totalOrders:t.totalOrders,totalRevenue:t.totalRevenue,averageOrderValue:t.averageOrderValue,cancelRate:t.cancelRate}),b(t.topSellingItems),v(t.revenueByCategory)},R=()=>{let e=new Blob([(0,c.v2)(h)],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(e),r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download","".concat(m,"_Orders.csv")),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)};return r?(0,a.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-[rgba(234,219,102,1)]",children:"Loading..."})}):e?(0,a.jsxs)("main",{className:"min-h-screen bg-black",children:[(0,a.jsx)(n.Z,{}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-20",children:[(0,a.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)]",children:"Dashboard"}),(0,a.jsxs)("p",{className:"text-gray-400",children:["Sales analytics and order insights for ",m]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("button",{onClick:R,className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export ",m," Data"]}),(0,a.jsx)(d.default,{href:"/admin",className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors",children:"Back to Admin"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-gray-900 border border-[rgba(182,155,76,0.3)] shadow-lg rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-gray-400 text-sm font-medium mb-2",children:"Total Orders"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-white mb-2",children:w.totalOrders}),(0,a.jsx)("div",{className:"text-[rgba(234,219,102,1)]",children:"This month"})]}),(0,a.jsx)("div",{className:"h-1 bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)]"})]}),(0,a.jsxs)("div",{className:"bg-gray-900 border border-[rgba(182,155,76,0.3)] shadow-lg rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-gray-400 text-sm font-medium mb-2",children:"Total Revenue"}),(0,a.jsxs)("div",{className:"text-3xl font-bold text-white mb-2",children:["₹",w.totalRevenue.toFixed(2)]}),(0,a.jsx)("div",{className:"text-[rgba(234,219,102,1)]",children:"Inc. 18% GST"})]}),(0,a.jsx)("div",{className:"h-1 bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)]"})]}),(0,a.jsxs)("div",{className:"bg-gray-900 border border-[rgba(182,155,76,0.3)] shadow-lg rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-gray-400 text-sm font-medium mb-2",children:"Average Order"}),(0,a.jsxs)("div",{className:"text-3xl font-bold text-white mb-2",children:["₹",w.averageOrderValue.toFixed(2)]}),(0,a.jsx)("div",{className:"text-[rgba(234,219,102,1)]",children:"Per order value"})]}),(0,a.jsx)("div",{className:"h-1 bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)]"})]}),(0,a.jsxs)("div",{className:"bg-gray-900 border border-[rgba(182,155,76,0.3)] shadow-lg rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-gray-400 text-sm font-medium mb-2",children:"Cancellation Rate"}),(0,a.jsxs)("div",{className:"text-3xl font-bold text-white mb-2",children:[w.cancelRate.toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-[rgba(234,219,102,1)]",children:"Order cancellations"})]}),(0,a.jsx)("div",{className:"h-1 bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)]"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-900 border border-[rgba(182,155,76,0.3)] shadow-lg rounded-lg p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)]",children:"Revenue by Category"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-800",children:[(0,a.jsx)("th",{className:"pb-3 text-gray-400",children:"Category"}),(0,a.jsx)("th",{className:"pb-3 text-gray-400 text-right",children:"Revenue"}),(0,a.jsx)("th",{className:"pb-3 text-gray-400 text-right",children:"Share"})]})}),(0,a.jsx)("tbody",{children:y.map((e,t)=>(0,a.jsxs)("tr",{className:"border-b border-gray-800",children:[(0,a.jsx)("td",{className:"py-3 font-medium",children:e.category}),(0,a.jsxs)("td",{className:"py-3 text-right text-[rgba(234,219,102,1)]",children:["₹",e.revenue.toFixed(2)]}),(0,a.jsxs)("td",{className:"py-3 text-right",children:[(e.revenue/w.totalRevenue*100).toFixed(1),"%"]})]},e.category))})]})})]}),(0,a.jsxs)("div",{className:"bg-gray-900 border border-[rgba(182,155,76,0.3)] shadow-lg rounded-lg p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)]",children:"Top Selling Items"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-800",children:[(0,a.jsx)("th",{className:"pb-3 text-gray-400",children:"Item"}),(0,a.jsx)("th",{className:"pb-3 text-gray-400",children:"Category"}),(0,a.jsx)("th",{className:"pb-3 text-gray-400 text-right",children:"Quantity Sold"}),(0,a.jsx)("th",{className:"pb-3 text-gray-400 text-right",children:"Revenue"})]})}),(0,a.jsx)("tbody",{children:u.map((e,t)=>(0,a.jsxs)("tr",{className:"border-b border-gray-800",children:[(0,a.jsx)("td",{className:"py-3 font-medium",children:e.name}),(0,a.jsx)("td",{className:"py-3 text-gray-400",children:e.category}),(0,a.jsx)("td",{className:"py-3 text-right",children:e.quantity}),(0,a.jsxs)("td",{className:"py-3 text-right text-[rgba(234,219,102,1)]",children:["₹",e.revenue.toFixed(2)]})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"bg-gray-900 border border-[rgba(182,155,76,0.3)] shadow-lg rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)]",children:"Recent Orders"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-800",children:[(0,a.jsx)("th",{className:"pb-3 text-gray-400",children:"Order ID"}),(0,a.jsx)("th",{className:"pb-3 text-gray-400",children:"Date"}),(0,a.jsx)("th",{className:"pb-3 text-gray-400",children:"Items"}),(0,a.jsx)("th",{className:"pb-3 text-gray-400 text-right",children:"Total"}),(0,a.jsx)("th",{className:"pb-3 text-gray-400 text-center",children:"Status"}),(0,a.jsx)("th",{className:"pb-3 text-gray-400",children:"Payment"})]})}),(0,a.jsx)("tbody",{children:j.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-gray-900/50",children:[(0,a.jsx)("td",{className:"py-3 font-medium",children:e.id}),(0,a.jsx)("td",{className:"py-3 text-gray-400",children:new Date(e.date).toLocaleDateString()}),(0,a.jsxs)("td",{className:"py-3",children:[e.items.slice(0,2).map((e,t)=>(0,a.jsxs)("div",{className:"text-sm",children:[e.quantity,"x ",e.name]},t)),e.items.length>2&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["+",e.items.length-2," more items"]})]}),(0,a.jsxs)("td",{className:"py-3 text-right text-[rgba(234,219,102,1)]",children:["₹",e.total.toFixed(2)]}),(0,a.jsx)("td",{className:"py-3 text-center",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs bg-green-900/30 text-green-400",children:"Completed"})}),(0,a.jsx)("td",{className:"py-3 text-gray-400",children:e.paymentMethod||"Cash"})]},e.id))})]})}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsx)(d.default,{href:"/admin/orders",className:"text-[rgba(234,219,102,1)] hover:underline text-sm",children:"View All Orders →"})})]}),(0,a.jsxs)("div",{className:"mt-10",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)]",children:"Monthly Reports"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:["January","February","March","April","May","June","July"].map(e=>(0,a.jsxs)("div",{className:"dish-card p-6 rounded-lg hover-lift cursor-pointer ".concat(e===m?"border-2 border-[rgba(234,219,102,0.5)]":""),onClick:()=>g(e),children:[(0,a.jsxs)("h3",{className:"font-medium mb-2",children:[e," 2023"]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:e===m?"Current View":"Click to View"}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),g(e),setTimeout(()=>R(),100)},className:"text-xs px-2 py-1 bg-gray-800 rounded-md text-gray-300 hover:bg-gray-700",children:"Export"})]})]},e))})]})]}),(0,a.jsx)(o.Z,{})]}):null}},7860:function(e,t,r){"use strict";r.d(t,{AU:function(){return l},B4:function(){return n},Xr:function(){return m},lA:function(){return o},oe:function(){return i},v2:function(){return c}});var a=r(9600);let s=()=>{let e=new Date,t=[];for(let r=0;r<60;r++){let s=new Date(e);s.setDate(s.getDate()-r);let l=Math.floor(8*Math.random())+3;for(let e=0;e<l;e++){let r=[],l=Math.floor(4*Math.random())+1,n=0;for(let e=0;e<l;e++){let e=a.KD[Math.floor(Math.random()*a.KD.length)],t=1.18*e.price,s=Math.floor(2*Math.random())+1;r.push({id:e.id,name:e.name,category:e.category,price:t,quantity:s}),n+=t*s}t.push({id:"ORD-".concat(s.getFullYear()).concat((s.getMonth()+1).toString().padStart(2,"0")).concat(s.getDate().toString().padStart(2,"0"),"-").concat(e),date:s.toISOString(),total:n,items:r,status:Math.random()>.1?"completed":"cancelled",paymentMethod:Math.random()>.7?"Cash":"Online"})}}return t},l=()=>{try{let e=localStorage.getItem("restaurantOrders");if(e)return JSON.parse(e);{let e=s();return localStorage.setItem("restaurantOrders",JSON.stringify(e)),e}}catch(e){return console.error("Error getting orders:",e),[]}},n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date().getFullYear(),r=l(),a=["january","february","march","april","may","june","july","august","september","october","november","december"].findIndex(t=>t.toLowerCase()===e.toLowerCase());return -1===a?[]:r.filter(e=>{let r=new Date(e.date);return r.getMonth()===a&&r.getFullYear()===t})},o=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date().getFullYear(),a=(e=t?n(t,r):l()).filter(e=>"completed"===e.status),s=a.length,o=a.reduce((e,t)=>e+t.total,0),c=e.length>0?(e.length-a.length)/e.length*100:0,i={};a.forEach(e=>{e.items.forEach(e=>{i[e.id]||(i[e.id]={id:e.id,name:e.name,category:e.category,quantity:0,revenue:0}),i[e.id].quantity+=e.quantity,i[e.id].revenue+=e.price*e.quantity})});let m=Object.values(i).sort((e,t)=>t.revenue-e.revenue);return{totalOrders:s,totalRevenue:o,averageOrderValue:s>0?o/s:0,cancelRate:c,topSellingItems:m.slice(0,10),revenueByCategory:d(m)}},d=e=>{let t={};return e.forEach(e=>{t[e.category]||(t[e.category]=0),t[e.category]+=e.revenue}),Object.entries(t).map(e=>{let[t,r]=e;return{category:t,revenue:r}}).sort((e,t)=>t.revenue-e.revenue)},c=e=>{if(!e||!e.length)return"";let t="Order ID,Date,Total,Items,Status,Payment Method\n";return e.forEach(e=>{let r=new Date(e.date).toLocaleDateString(),a=e.items.map(e=>"".concat(e.quantity,"x ").concat(e.name)).join("; ");t+='"'.concat(e.id,'","').concat(r,'","₹').concat(e.total.toFixed(2),'","').concat(a,'","').concat(e.status,'","').concat(e.paymentMethod,'"\n')}),t},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{return(localStorage.getItem("recentOrders")?JSON.parse(localStorage.getItem("recentOrders")):[]).slice(0,e)}catch(e){return console.error("Error retrieving recent orders:",e),[]}},m=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let e=localStorage.getItem("revenueData")?JSON.parse(localStorage.getItem("revenueData")):{daily:{},monthly:{},items:{}},t=Object.values(e.items).sort((e,t)=>t.totalRevenue-e.totalRevenue).slice(0,10);return{dailyData:e.daily,monthlyData:e.monthly,topItems:t}}catch(e){return console.error("Error retrieving revenue data:",e),{dailyData:{},monthlyData:{},topItems:[]}}}},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[648,145,600,204,971,117,744],function(){return e(e.s=5921)}),_N_E=e.O()}]);