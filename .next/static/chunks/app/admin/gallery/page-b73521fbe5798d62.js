(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[56],{7722:function(e,a,t){Promise.resolve().then(t.bind(t,2141))},2141:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return d}});var s=t(7437),r=t(2265),l=t(9376),i=t(3145),n=t(8322);function d(){var e,a;let[t,d]=(0,r.useState)(!1),[c,o]=(0,r.useState)(!0),[m,g]=(0,r.useState)("gallery"),[u,x]=(0,r.useState)("all"),[h,b]=(0,r.useState)([]),[p,y]=(0,r.useState)(null),[j,f]=(0,r.useState)(""),N=(0,l.useRouter)(),[v,w]=(0,r.useState)(null),[C,k]=(0,r.useState)(""),[D,S]=(0,r.useState)(""),[I,z]=(0,r.useState)(""),[A,P]=(0,r.useState)("food"),[_,E]=(0,r.useState)(!1),[F,R]=(0,r.useState)(0),[U,M]=(0,r.useState)(null),O=(0,r.useRef)(null),[T,L]=(0,r.useState)(!1),[G,B]=(0,r.useState)({name:"",description:"",category:"food"});(0,r.useEffect)(()=>{localStorage.getItem("adminAuth")?(d(!0),q()):N.push("/admin/login"),o(!1)},[N]),(0,r.useEffect)(()=>{t&&q()},[u,t]);let q=()=>{let e=(0,n.NQ)("all"===u?null:u);if(j.trim()){let a=j.toLowerCase();b(e.filter(e=>e.name.toLowerCase().includes(a)||e.description&&e.description.toLowerCase().includes(a)))}else b(e)},Z=async e=>{if(e.preventDefault(),v){E(!0),R(10);try{let e=setInterval(()=>{R(a=>a>=90?(clearInterval(e),90):a+10)},300),a=await (0,n.Hg)(v);M(a),R(95),setTimeout(()=>{(0,n.Ve)({name:D,description:I,url:C,category:A,width:a.optimized.width,height:a.optimized.height}),clearInterval(e),R(100),setTimeout(()=>{E(!1),w(null),k(""),S(""),z(""),M(null),R(0),O.current&&(O.current.value=""),g("gallery"),q()},1e3)},800)}catch(e){console.error("Upload failed:",e),E(!1),alert("Upload failed. Please try again.")}}},H=e=>{window.confirm("Are you sure you want to delete this image? This cannot be undone.")&&((0,n.vX)(e),q(),p&&p.id===e&&y(null))},Q=e=>{y(e),B({name:e.name,description:e.description||"",category:e.category})},V=()=>{q()};return c?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"text-[rgba(234,219,102,1)]",children:"Loading..."})}):t?(0,s.jsxs)("div",{className:"py-4",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)]",children:"Gallery Manager"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Upload, organize, and manage images for your website gallery"})]}),(0,s.jsxs)("div",{className:"mb-6 flex border-b border-gray-800",children:[(0,s.jsx)("button",{onClick:()=>g("gallery"),className:"px-6 py-3 font-medium ".concat("gallery"===m?"border-b-2 border-[rgba(234,219,102,1)] text-[rgba(234,219,102,1)]":"text-gray-400 hover:text-white"),children:"Image Gallery"}),(0,s.jsx)("button",{onClick:()=>g("upload"),className:"px-6 py-3 font-medium ".concat("upload"===m?"border-b-2 border-[rgba(234,219,102,1)] text-[rgba(234,219,102,1)]":"text-gray-400 hover:text-white"),children:"Upload New Image"})]}),"gallery"===m?(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-1",children:[(0,s.jsxs)("div",{className:"bg-gray-900 p-4 rounded-lg mb-4",children:[(0,s.jsx)("h3",{className:"font-medium mb-3 text-white",children:"Categories"}),(0,s.jsx)("ul",{className:"space-y-2",children:n.pj.map(e=>(0,s.jsx)("li",{children:(0,s.jsx)("button",{onClick:()=>x(e.id),className:"w-full text-left px-3 py-2 rounded-md transition-colors ".concat(u===e.id?"bg-gradient-to-r from-[rgba(182,155,76,0.2)] to-[rgba(234,219,102,0.2)] text-[rgba(234,219,102,1)]":"text-gray-300 hover:bg-gray-800"),children:e.name})},e.id))})]}),(0,s.jsxs)("div",{className:"bg-gray-900 p-4 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium mb-3 text-white",children:"Search"}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("input",{type:"text",value:j,onChange:e=>f(e.target.value),onKeyDown:e=>"Enter"===e.key&&V(),placeholder:"Search images...",className:"flex-1 px-3 py-2 bg-gray-800 border border-gray-700 rounded-l-md text-white focus:outline-none focus:ring-1 focus:ring-[rgba(234,219,102,0.5)]"}),(0,s.jsx)("button",{onClick:V,className:"px-3 py-2 bg-[rgba(182,155,76,1)] text-black rounded-r-md",children:"\uD83D\uDD0D"})]}),j&&(0,s.jsx)("button",{onClick:()=>{f(""),q()},className:"mt-2 text-sm text-gray-400 hover:text-white",children:"Clear search"})]})]}),(0,s.jsx)("div",{className:"lg:col-span-3",children:p?(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-800",children:[(0,s.jsx)("h3",{className:"font-medium text-white",children:"Image Details"}),(0,s.jsx)("button",{onClick:()=>{y(null),L(!1)},className:"text-gray-400 hover:text-white",children:"✕"})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("div",{className:"relative h-80 w-full bg-gray-800 rounded-lg overflow-hidden mb-4",children:(0,s.jsx)(i.default,{src:p.url,alt:p.name,fill:!0,className:"object-contain"})}),T?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-400 mb-1",children:"Name"}),(0,s.jsx)("input",{type:"text",value:G.name,onChange:e=>B({...G,name:e.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-md text-white focus:outline-none focus:ring-1 focus:ring-[rgba(234,219,102,0.5)]"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-400 mb-1",children:"Description"}),(0,s.jsx)("textarea",{value:G.description,onChange:e=>B({...G,description:e.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-md text-white focus:outline-none focus:ring-1 focus:ring-[rgba(234,219,102,0.5)] min-h-[100px]"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-gray-400 mb-1",children:"Category"}),(0,s.jsx)("select",{value:G.category,onChange:e=>B({...G,category:e.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-md text-white focus:outline-none focus:ring-1 focus:ring-[rgba(234,219,102,0.5)]",children:n.pj.filter(e=>"all"!==e.id).map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-2",children:[(0,s.jsx)("button",{onClick:()=>{B({name:p.name,description:p.description||"",category:p.category}),L(!1)},className:"px-4 py-2 border border-gray-700 rounded-md text-gray-300 hover:bg-gray-800",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{p&&((0,n.Fn)(p.id,G),y({...p,...G}),L(!1),q())},className:"px-4 py-2 bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)] text-black rounded-md",children:"Save Changes"})]})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-medium mb-2 text-white",children:p.name}),(0,s.jsx)("p",{className:"text-gray-400 mb-4",children:p.description||"No description provided"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"bg-gray-800 p-3 rounded-md",children:[(0,s.jsx)("span",{className:"block text-gray-400 text-sm",children:"Category"}),(0,s.jsx)("span",{className:"text-white",children:null===(e=n.pj.find(e=>e.id===p.category))||void 0===e?void 0:e.name})]}),(0,s.jsxs)("div",{className:"bg-gray-800 p-3 rounded-md",children:[(0,s.jsx)("span",{className:"block text-gray-400 text-sm",children:"Dimensions"}),(0,s.jsxs)("span",{className:"text-white",children:[p.width," \xd7 ",p.height]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 p-3 rounded-md",children:[(0,s.jsx)("span",{className:"block text-gray-400 text-sm",children:"Added"}),(0,s.jsx)("span",{className:"text-white",children:new Date(p.createdAt).toLocaleDateString()})]}),(0,s.jsxs)("div",{className:"bg-gray-800 p-3 rounded-md",children:[(0,s.jsx)("span",{className:"block text-gray-400 text-sm",children:"Image ID"}),(0,s.jsx)("span",{className:"text-white truncate",children:p.id})]})]}),(0,s.jsxs)("div",{className:"flex justify-between pt-2 border-t border-gray-800",children:[(0,s.jsx)("button",{onClick:()=>H(p.id),className:"px-4 py-2 bg-red-900/50 text-red-300 rounded-md hover:bg-red-800/50",children:"Delete Image"}),(0,s.jsx)("button",{onClick:()=>{L(!0)},className:"px-4 py-2 bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)] text-black rounded-md",children:"Edit Details"})]})]})]})]}):(0,s.jsx)(s.Fragment,{children:0===h.length?(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg p-10 text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDDBC️"}),(0,s.jsx)("h3",{className:"text-xl font-medium mb-2 text-white",children:"No images found"}),(0,s.jsx)("p",{className:"text-gray-400 mb-6",children:j?'No images matching "'.concat(j,'"'):"all"!==u?'No images in the "'.concat(null===(a=n.pj.find(e=>e.id===u))||void 0===a?void 0:a.name,'" category'):"Upload your first image to get started"}),(0,s.jsx)("button",{onClick:()=>g("upload"),className:"px-6 py-3 bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)] text-black rounded-md font-medium",children:"Upload New Image"})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(e=>{var a;return(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg overflow-hidden hover:border-[rgba(234,219,102,0.5)] border border-gray-800 transition-colors cursor-pointer",onClick:()=>Q(e),children:[(0,s.jsx)("div",{className:"relative h-48 w-full bg-gray-800",children:(0,s.jsx)(i.default,{src:e.url,alt:e.name,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsx)("h3",{className:"font-medium mb-1 truncate",title:e.name,children:e.name}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-xs text-gray-400",children:null===(a=n.pj.find(a=>a.id===e.category))||void 0===a?void 0:a.name}),(0,s.jsxs)("span",{className:"text-xs text-gray-400",children:[e.width," \xd7 ",e.height]})]})]})]},e.id)})})})})]}):(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)]",children:"Upload New Image"}),(0,s.jsx)("form",{onSubmit:Z,children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-400 mb-2",children:"Select Image File (JPG, PNG)"}),(0,s.jsx)("input",{type:"file",ref:O,onChange:e=>{let a=e.target.files[0];if(!a)return;let t=new FileReader;t.onload=()=>{k(t.result)},t.readAsDataURL(a),w(a),S(a.name.replace(/\.[^/.]+$/,""))},accept:"image/jpeg, image/png, image/webp",className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white",required:!0,disabled:_})]}),C&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-400 mb-2",children:"Preview"}),(0,s.jsx)("div",{className:"relative h-64 w-full bg-gray-800 rounded-lg overflow-hidden",children:(0,s.jsx)(i.default,{src:C,alt:"Image preview",fill:!0,className:"object-contain"})})]})]}),(0,s.jsx)("div",{children:v&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-400 mb-2",children:"Image Name"}),(0,s.jsx)("input",{type:"text",value:D,onChange:e=>S(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white",placeholder:"Give your image a descriptive name",required:!0,disabled:_})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-400 mb-2",children:"Description (optional)"}),(0,s.jsx)("textarea",{value:I,onChange:e=>z(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white min-h-[100px]",placeholder:"Add a description of this image",disabled:_})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-gray-400 mb-2",children:"Category"}),(0,s.jsx)("select",{value:A,onChange:e=>P(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white",disabled:_,children:n.pj.filter(e=>"all"!==e.id).map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]}),_&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:F<100?"Processing & uploading...":"Upload complete!"}),(0,s.jsxs)("span",{className:"text-white text-sm",children:[F,"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-800 rounded-full h-2.5",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)] h-2.5 rounded-full transition-all duration-300",style:{width:"".concat(F,"%")}})})]}),U&&(0,s.jsxs)("div",{className:"mb-4 p-3 bg-gray-800 rounded-lg border border-gray-700",children:[(0,s.jsx)("h4",{className:"font-medium mb-2 text-[rgba(234,219,102,1)]",children:"Image Optimized"}),(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Original size:"}),(0,s.jsxs)("span",{className:"text-white",children:[(U.original.size/1024/1024).toFixed(2)," ","MB"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Optimized size:"}),(0,s.jsxs)("span",{className:"text-white",children:[(U.optimized.size/1024/1024).toFixed(2)," ","MB"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Saved:"}),(0,s.jsxs)("span",{className:"text-green-400",children:[Math.round((U.original.size-U.optimized.size)/U.original.size*100),"%"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Format:"}),(0,s.jsxs)("span",{className:"text-white",children:[U.original.type.split("/")[1]," →"," ",U.optimized.type.split("/")[1]]})]})]})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{type:"submit",disabled:!v||_,className:"px-6 py-3 bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)] text-black rounded-lg font-medium hover:opacity-90 transition-opacity disabled:opacity-50",children:_?"Processing...":"Upload & Optimize Image"})})]})})]})})]})]}):null}},8322:function(e,a,t){"use strict";t.d(a,{Fn:function(){return n},Hg:function(){return c},NQ:function(){return l},Ve:function(){return i},pj:function(){return r},vX:function(){return d}});let s=[{id:"gallery-1",name:"Dish Presentation",description:"Beautiful presentation of our signature dish",url:"/images/homepage_main_course.jpg",category:"food",createdAt:"2023-05-15T12:30:00Z",width:1200,height:800},{id:"gallery-2",name:"Restaurant Interior",description:"Elegant ambiance of our dining space",url:"/images/normal.jpg",category:"restaurant",createdAt:"2023-04-18T10:15:00Z",width:1600,height:1067},{id:"gallery-3",name:"Dessert Special",description:"Exquisite dessert presentation",url:"/images/homepage_desert.jpg",category:"food",createdAt:"2023-06-02T15:45:00Z",width:1400,height:933}],r=[{id:"all",name:"All Images"},{id:"food",name:"Food & Dishes"},{id:"restaurant",name:"Restaurant"},{id:"events",name:"Events"},{id:"staff",name:"Staff"}],l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&"all"!==e?s.filter(a=>a.category===e).sort((e,a)=>new Date(a.createdAt)-new Date(e.createdAt)):[...s].sort((e,a)=>new Date(a.createdAt)-new Date(e.createdAt))},i=e=>{let a={id:"gallery-".concat(Date.now()),createdAt:new Date().toISOString(),...e};return s=[a,...s],a},n=(e,a)=>{let t=s.findIndex(a=>a.id===e);return -1===t?null:(s[t]={...s[t],...a},s[t])},d=e=>-1!==s.findIndex(a=>a.id===e)&&(s=s.filter(a=>a.id!==e),!0),c=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1200;return new Promise(t=>{setTimeout(()=>{t({original:{name:e.name,size:e.size,type:e.type},optimized:{name:e.name,size:Math.round(.6*e.size),type:"image/webp",width:Math.min(a,1200),height:Math.round(Math.min(a,1200)/1200*800)}})},800)})}},9376:function(e,a,t){"use strict";var s=t(5475);t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}})},5523:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"RouterContext",{enumerable:!0,get:function(){return s}});let s=t(7043)._(t(2265)).default.createContext(null)}},function(e){e.O(0,[145,971,117,744],function(){return e(e.s=7722)}),_N_E=e.O()}]);