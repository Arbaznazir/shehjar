(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{2216:function(e,a,r){Promise.resolve().then(r.bind(r,2532))},2532:function(e,a,r){"use strict";r.r(a);var s=r(7437),t=r(2265),n=r(9376),l=r(2155),i=r(8485),c=r(63),o=r(1218);r(3145),a.default=()=>{let e=(0,n.useRouter)(),{cartItems:a,getCartTotal:r,getFormattedCartTotal:d,clearCart:m}=(0,l.j)(),[x,g]=(0,t.useState)(1),[u,b]=(0,t.useState)(!1),[h,y]=(0,t.useState)(!1),[p,j]=(0,t.useState)(null),[f,N]=(0,t.useState)({name:"",phone:"",email:"",address:"",specialInstructions:""}),[v,w]=(0,t.useState)("payAfterDelivery"),[k,C]=(0,t.useState)(!1);(0,t.useEffect)(()=>{0!==a.length||h||e.push("/menu")},[a,h,e]);let S=e=>{let{name:a,value:r}=e.target;N(e=>({...e,[a]:r}))},P=e=>{w(e)},O=async()=>{b(!0);let e={id:"ORD-".concat(Date.now().toString(36).toUpperCase()),customerInfo:f,items:a,total:r(),paymentMethod:v,isInRestaurant:k,status:"payFirst"===v?"pendingPayment":"pendingApproval",createdAt:new Date().toISOString()};try{console.log("Submitting order:",e),await new Promise(e=>setTimeout(e,1500));let a=[...JSON.parse(localStorage.getItem("shehjarOrders")||"[]"),e];localStorage.setItem("shehjarOrders",JSON.stringify(a));let r=JSON.parse(localStorage.getItem("adminNotifications")||"[]"),s={id:Date.now(),type:"newOrder",orderId:e.id,message:"New order #".concat(e.id," received"),createdAt:new Date().toISOString(),read:!1};localStorage.setItem("adminNotifications",JSON.stringify([...r,s])),j(e.id),y(!0),m(),g(3)}catch(e){console.error("Error submitting order:",e),alert("There was an error processing your order. Please try again.")}finally{b(!1)}},I=()=>{e.push("/menu")};return h&&3===x?(0,s.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[(0,s.jsx)(i.Z,{}),(0,s.jsx)("div",{className:"container mx-auto py-24 px-4",children:(0,s.jsx)("div",{className:"max-w-lg mx-auto bg-gray-900 rounded-lg shadow-lg p-8 text-center",children:(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100 text-green-500 mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)]",children:"Order Successfully Placed!"}),(0,s.jsxs)("p",{className:"text-gray-400 mb-6",children:["Your order #",p," has been received and"," ","payFirst"===v?"is being processed.":"is waiting for restaurant confirmation."]}),"payFirst"!==v&&(0,s.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-800 rounded-md p-4 mb-6",children:(0,s.jsxs)("p",{className:"text-yellow-500 text-sm",children:["Please note that your order will be prepared once the restaurant confirms it.",k?" You can pay for your order after your meal.":" You will pay for your order upon delivery."]})}),(0,s.jsx)("button",{onClick:I,className:"px-6 py-3 bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)] text-black rounded-lg font-medium",children:"Back to Menu"})]})})}),(0,s.jsx)(c.Z,{})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[(0,s.jsx)(i.Z,{}),(0,s.jsx)("div",{className:"container mx-auto py-24 px-4",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8 text-center",children:[(0,s.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)]",children:"Checkout"}),(0,s.jsx)("div",{className:"w-24 h-1 bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)] mx-auto mb-6"})]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center mb-8",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-full flex items-center justify-center ".concat(x>=1?"bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)] text-black":"bg-gray-800 text-gray-400"),children:"1"}),(0,s.jsx)("div",{className:"h-1 w-16 md:w-32 ".concat(x>=2?"bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)]":"bg-gray-800")}),(0,s.jsx)("div",{className:"h-10 w-10 rounded-full flex items-center justify-center ".concat(x>=2?"bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)] text-black":"bg-gray-800 text-gray-400"),children:"2"}),(0,s.jsx)("div",{className:"h-1 w-16 md:w-32 ".concat(x>=3?"bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)]":"bg-gray-800")}),(0,s.jsx)("div",{className:"h-10 w-10 rounded-full flex items-center justify-center ".concat(x>=3?"bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)] text-black":"bg-gray-800 text-gray-400"),children:"3"})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm text-gray-400 px-2",children:[(0,s.jsx)("span",{className:x>=1?"text-[rgba(234,219,102,1)]":"",children:"Customer Info"}),(0,s.jsx)("span",{className:x>=2?"text-[rgba(234,219,102,1)]":"",children:"Payment Method"}),(0,s.jsx)("span",{className:x>=3?"text-[rgba(234,219,102,1)]":"",children:"Confirmation"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg p-6 mb-6",children:[1===x&&(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),g(2)},children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Customer Information"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-400 text-sm mb-2",children:"Full Name *"}),(0,s.jsx)("input",{type:"text",name:"name",value:f.name,onChange:S,required:!0,className:"w-full px-4 py-2 rounded-md bg-gray-800 border border-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-[rgba(234,219,102,0.5)]"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-400 text-sm mb-2",children:"Phone Number *"}),(0,s.jsx)("input",{type:"tel",name:"phone",value:f.phone,onChange:S,required:!0,className:"w-full px-4 py-2 rounded-md bg-gray-800 border border-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-[rgba(234,219,102,0.5)]"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-400 text-sm mb-2",children:"Email (Optional)"}),(0,s.jsx)("input",{type:"email",name:"email",value:f.email,onChange:S,className:"w-full px-4 py-2 rounded-md bg-gray-800 border border-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-[rgba(234,219,102,0.5)]"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-400 text-sm mb-2",children:"Delivery Address (Optional for in-restaurant orders)"}),(0,s.jsx)("textarea",{name:"address",value:f.address,onChange:S,rows:"2",className:"w-full px-4 py-2 rounded-md bg-gray-800 border border-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-[rgba(234,219,102,0.5)]"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-gray-400 text-sm mb-2",children:"Special Instructions (Optional)"}),(0,s.jsx)("textarea",{name:"specialInstructions",value:f.specialInstructions,onChange:S,rows:"2",className:"w-full px-4 py-2 rounded-md bg-gray-800 border border-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-[rgba(234,219,102,0.5)]",placeholder:"Any allergies, special requests, etc."})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("button",{type:"button",onClick:I,className:"px-4 py-2 rounded-md bg-gray-800 text-white hover:bg-gray-700",children:"Back to Menu"}),(0,s.jsx)("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)] text-black rounded-md font-medium",children:"Continue to Payment"})]})]}),2===x&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Payment Method"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-400 text-sm mb-2",children:"Are you dining in the restaurant?"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"radio",checked:k,onChange:()=>C(!0),className:"mr-2"}),(0,s.jsx)("span",{children:"Yes, I'm at the restaurant"})]}),(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"radio",checked:!k,onChange:()=>C(!1),className:"mr-2"}),(0,s.jsx)("span",{children:"No, it's a delivery order"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{onClick:()=>P("payAfterDelivery"),className:"border ".concat("payAfterDelivery"===v?"border-[rgba(234,219,102,1)] bg-gray-800":"border-gray-700 bg-gray-900"," rounded-lg p-4 cursor-pointer hover:bg-gray-800 transition-colors"),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"radio",checked:"payAfterDelivery"===v,onChange:()=>{},className:"mr-3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:k?"Pay After Feast":"Cash on Delivery"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:k?"Enjoy your meal and pay when you're done":"Pay when your order arrives at your doorstep"})]})]})}),(0,s.jsx)("div",{onClick:()=>P("payFirst"),className:"border ".concat("payFirst"===v?"border-[rgba(234,219,102,1)] bg-gray-800":"border-gray-700 bg-gray-900"," rounded-lg p-4 cursor-pointer hover:bg-gray-800 transition-colors"),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"radio",checked:"payFirst"===v,onChange:()=>{},className:"mr-3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:"Pay Now"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Pay securely online via our payment gateway"})]})]})})]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("button",{type:"button",onClick:()=>g(1),className:"px-4 py-2 rounded-md bg-gray-800 text-white hover:bg-gray-700",children:"Back"}),(0,s.jsx)("button",{type:"button",onClick:O,disabled:u,className:"px-6 py-2 bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)] text-black rounded-md font-medium flex items-center",children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Place Order"})]})]})]})}),(0,s.jsx)("div",{className:"md:col-span-1",children:(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg p-6 sticky top-24",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Order Summary"}),(0,s.jsx)("div",{className:"space-y-3 mb-4",children:a.map(e=>{let a=e.price,r=e.name;if(e.selectedVariant&&e.variants){let s=e.variants.find(a=>a.size===e.selectedVariant);s&&(a=s.price,r="".concat(e.name," (").concat(e.selectedVariant,")"))}return(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("span",{className:"text-gray-300",children:[e.quantity," x ",r]})}),(0,s.jsx)("div",{className:"text-white",children:(0,o._B)(a*e.quantity)})]},e.cartItemId)})}),(0,s.jsxs)("div",{className:"border-t border-gray-800 pt-4 mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Subtotal"}),(0,s.jsx)("span",{className:"text-white",children:d()})]}),(0,s.jsxs)("div",{className:"flex justify-between font-bold text-lg",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[rgba(182,155,76,1)] to-[rgba(234,219,102,1)]",children:d()})]})]})]})})]})]})}),(0,s.jsx)(c.Z,{})]})}},9376:function(e,a,r){"use strict";var s=r(5475);r.o(s,"usePathname")&&r.d(a,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(a,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[648,145,600,204,971,117,744],function(){return e(e.s=2216)}),_N_E=e.O()}]);